# LurlHub 內容標籤系統

> 建立日期：2025-01-20
> 更新日期：2026-01-20
> 狀態：Phase 1 完成

---

## 標籤樹結構

| 主分類 | 子分類 |
|-------|--------|
| 奶子 | 穿衣、裸體、大奶、露點 |
| 屁股 | (暫無) |
| 鮑魚 | (暫無) |
| 全身 | (暫無) |
| 姿勢 | 女上、傳教士、背後 |
| 口交 | (暫無) |

---

## 規則說明

### 標註規則
- 可只標主分類（如「奶子」）
- 可標子分類（如「奶子:大奶」）
- 一個內容可同時有多個標籤

### 搜尋規則
- **主分類搜尋**：選「奶子」會匹配 `奶子` 和 `奶子:*` 所有子標籤
- **子分類搜尋**：選「奶子:大奶」只匹配精確的 `奶子:大奶`
- **多選邏輯**：AND（必須全部符合）

---

## Phase 1：管理員標註 (已完成)

**標註位置：**
1. `/lurl/browse` - 瀏覽頁卡片
2. `/lurl/view/:id` - 詳情頁

**UI 設計：**
```
主分類標籤 [▶] 點擊展開子分類

展開後：
[奶子] [▼] [穿衣] [裸體] [大奶] [露點]
```

**操作：**
- 點擊主標籤 = 切換選中/取消
- 點擊 ▶/▼ = 展開/收起子標籤
- 點擊子標籤 = 切換選中/取消
- 即時保存（不用按確認）

---

## Phase 2：開放用戶標註（未來）

- 用戶標註算「投票」
- 多人標同一個才正式顯示
- 防止亂標機制

---

## 技術實作

### 資料結構

記錄加 `tags` 欄位，存放完整標籤路徑：
```json
{
  "id": "xxx",
  "title": "...",
  "tags": ["奶子:大奶", "姿勢:背後"],
  ...
}
```

### API

| 端點 | 說明 |
|------|------|
| `PATCH /lurl/api/records/:id/tags` | 更新標籤（需 Admin） |
| `GET /lurl/api/tags` | 取得標籤樹結構 |
| `GET /lurl/api/records?tags=奶子,姿勢:背後` | 標籤篩選（AND 邏輯） |

### API 回應格式

**GET /lurl/api/tags**
```json
{
  "tagTree": {
    "奶子": ["穿衣", "裸體", "大奶", "露點"],
    "屁股": [],
    "鮑魚": [],
    "全身": [],
    "姿勢": ["女上", "傳教士", "背後"],
    "口交": []
  },
  "mainTags": ["奶子", "屁股", "鮑魚", "全身", "姿勢", "口交"]
}
```
